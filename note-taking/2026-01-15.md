# Notes du 15 janvier 2026

## Layout de page dans MAUI

C'est la façon dont on dispose l'écran. Généralement en mobile les éléments sont disposés les un après les autres, en colonne, sur tablette c'est un peu plus flexible et quelques éléments peuvent être en ligne et sur bureau c'est beaucoup plus flexible.

Le layout dans MAUI est asssez similaire au CSS et il existe plusieurs layouts avec MAUI.

### 1. Stacklayout

Empile les éléments verticalement (par défaut) ou horizontalement, possible de changer cela avec l'attribut `Orientation`.

```csharp
<StackLayout Spacing="10" Margin="10" >
    <Label Text="Premier élément" />
    <Button Text="Deuxième élément" />
    <Entry Placeholder="Troisième élément" />
</StackLayout>
```

### 2. Grid

Permet d'organiser les éléments en lignes et en colonnes. Il est possible d'utiliser des balise RowDefinitions et ColumnDefinitions pour faire la même chose que les attributs ci-dessous (surêment plus flexibles).

```csharp
<Grid RowDefinitions="Auto,*,100" ColumnDefinitions="*,2*">
    <Label Text="En haut à gauche" Grid.Row="0" Grid.Column="0" />
    <Button Text="En haut à droite" Grid.Row="0" Grid.Column="1" />
    <Entry Placeholder="Sur deux colonnes" Grid.Row="1" Grid.ColumnSpan="2" />
</Grid>
```

### 3. FlexLayout

Permet un arrangement flexible des éléments (comme une flexbox en css).

```csharp
<FlexLayout Direction="Row" Wrap="Wrap" JustifyContent="SpaceAround">
    <Label Text="Élément 1" />
    <Button Text="Élément 2" />
    <Entry Placeholder="Élément 3" WidthRequest="150" />
</FlexLayout>
```

### 4. AbsoluteLayout

Permet de positionner précisément les éléments avec des coordonnées (position : absolute).

```csharp
<AbsoluteLayout>
    <Label Text="Position exacte" AbsoluteLayout.LayoutBounds="50,30,200,50" />
    <Button Text="Proportionnel"
            AbsoluteLayout.LayoutBounds="0.5,0.5,100,50"
            AbsoluteLayout.LayoutFlags="PositionProportional" />
</AbsoluteLayout>
```

### 5. HorizontalStackLayout et VerticalStackLayout

StackLayout mais avec orientation fixe.

```csharp
<HorizontalStackLayout Spacing="10">
    <Label Text="Côte à côte 1" />
    <Button Text="Côte à côte 2" />
</HorizontalStackLayout>
```

### 6. CollectionView

Afficher des collections de données avec virtualisation. Permet d'avoir égalemnt d'utiliser plusieurs layout différents.

```csharp
<CollectionView ItemsSource="{Binding Items}">
    <CollectionView.ItemTemplate>
        <DataTemplate>
            <Label Text="{Binding Name}" />
        </DataTemplate>
    </CollectionView.ItemTemplate>
</CollectionView>
```

### Exemple

Que représente cette page ?

```csharp
<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
x:Class="MaisonExample.MaisonGridPage"
Title="Maison avec Grid"
BackgroundColor="LightBlue">

    <Grid WidthRequest="300"
          HeightRequest="400"
          HorizontalOptions="Center"
          VerticalOptions="Center"
          RowDefinitions="100,150,150"
          ColumnDefinitions="50,100,100,50">

        <Polygon Fill="Firebrick"
                 Stroke="Black"
                 StrokeThickness="2"
                 Points="0,100 150,0 300,100"
                 Grid.ColumnSpan="4"
                 Grid.Row="0"/>

        <Rectangle Fill="SandyBrown"
                   Stroke="Black"
                   StrokeThickness="2"
                   Grid.Row="1"
                   Grid.RowSpan="2"
                   Grid.ColumnSpan="4"/>

        <Grid Grid.Row="1"
              Grid.Column="1"
              Margin="15">
            <Rectangle Fill="LightCyan"
                       Stroke="Black"
                       StrokeThickness="1"/>
            <Line X1="0" Y1="0.5" X2="1" Y2="0.5"
                  Stroke="Black"
                  StrokeThickness="1"
                  HorizontalOptions="FillAndExpand"
                  VerticalOptions="Center"/>
            <Line X1="0.5" Y1="0" X2="0.5" Y2="1"
                  Stroke="Black"
                  StrokeThickness="1"
                  HorizontalOptions="Center"
                  VerticalOptions="FillAndExpand"/>
        </Grid>

        <Grid Grid.Row="1"
              Grid.Column="2"
              Margin="15">
            <Rectangle Fill="LightCyan"
                       Stroke="Black"
                       StrokeThickness="1"/>
            <Line X1="0" Y1="0.5" X2="1" Y2="0.5"
                  Stroke="Black"
                  StrokeThickness="1"
                  HorizontalOptions="FillAndExpand"
                  VerticalOptions="Center"/>
            <Line X1="0.5" Y1="0" X2="0.5" Y2="1"
                  Stroke="Black"
                  StrokeThickness="1"
                  HorizontalOptions="Center"
                  VerticalOptions="FillAndExpand"/>
        </Grid>

        <Grid Grid.Row="2"
              Grid.Column="1"
              Grid.ColumnSpan="2"
              Margin="50,0,50,0">
            <Rectangle Fill="Brown"
                       Stroke="Black"
                       StrokeThickness="1"/>
            <Ellipse Fill="Gold"
                     WidthRequest="10"
                     HeightRequest="10"
                     HorizontalOptions="Start"
                     VerticalOptions="Center"
                     Margin="20,0,0,0"/>
        </Grid>

        <Rectangle Fill="DimGray"
                   Stroke="Black"
                   StrokeThickness="1"
                   Grid.Row="0"
                   Grid.Column="2"
                   WidthRequest="20"
                   HeightRequest="40"
                   HorizontalOptions="End"
                   VerticalOptions="Start"
                   Margin="0,0,10,0"/>

        <Ellipse Fill="Yellow"
                 Grid.Row="0"
                 Grid.Column="3"
                 WidthRequest="40"
                 HeightRequest="40"
                 HorizontalOptions="End"
                 VerticalOptions="Start"
                 Margin="0,10,10,0"/>

        <Rectangle Fill="ForestGreen"
                   Grid.Row="2"
                   Grid.ColumnSpan="4"
                   HeightRequest="20"
                   VerticalOptions="End"/>
    </Grid>
</ContentPage>
```

#### Réponse

Cela représente un tableau qui a été colorié pour correspondre au dessin d'une maison.

### Espaces entre les éléments

Globalement très similaire au CSS.

- Margin / Padding
- 4 valeurs (LEFT, TOP, RIGHT, BOTTOM)

```csharp
<FlexLayout Margin="0, 0, 0, 10">
</ FlexLayout>
```

---

## Gestion des évènements

Assez similaire au Javascript. Les événements (interactions utilisateurs) sont gérés dans les fichiers c# (code-behind).

### 1. Boutons - Événement Clicked

#### XAML

```xml
<Button Text="Cliquez-moi"
        Clicked="OnButtonClicked"
        x:Name="btnClickMe" />
```

#### Code-Behind

```csharp
private void OnButtonClicked(object sender, EventArgs e)
{
    // Accès au bouton via sender
    Button button = (Button)sender;
    button.Text = "Cliqué !";

    // Ou via x:Name
    btnClickMe.BackgroundColor = Colors.Green;
}
```

> x:Name définit un nom de l'attribut dans la code behind. C'est comme ajouter un id à la balise et qu'on le récupérait avec document.getElementById(id) sauf qu'il n'y a même pas besoin de le faire !

### 2. Champs de saisie - Événement TextChanged

#### XAML

```xml
<Entry Placeholder="Tapez ici..."
       TextChanged="OnTextChanged"
       Completed="OnTextCompleted"
       x:Name="txtName" />
```

#### Code-Behind

```csharp
private void OnTextChanged(object sender, TextChangedEventArgs e)
{
    // Accès aux valeurs anciennes et nouvelles
    string oldText = e.OldTextValue;
    string newText = e.NewTextValue;

    // Validation en temps réel
    if (newText.Length >= 3)
    {
        txtName.BackgroundColor = Colors.LightGreen;
    }
    else
    {
        txtName.BackgroundColor = Colors.LightPink;
    }
}

private void OnTextCompleted(object sender, EventArgs e)
{
    Entry entry = (Entry)sender;
    DisplayAlert("Info", $"Texte saisi : {entry.Text}", "OK");
}
```

- `TextChanged` se déclenche à chaque fois que l'utilisateur écrit ou efface un caractère.
- `TextChangedEventArgs` fournit les propriétés `NewTextValue` et `OldTextValue`
- `Completed` se déclenche quand l'utilisateur appuie sur Entrée

### 3. Cases à Cocher - Événement CheckedChanged

#### XAML

```xml
<CheckBox x:Name="AcceptTerms"
          CheckedChanged="OnCheckboxChanged"
          Color="Blue" />
<Label Text="J'accepte les conditions" />
```

#### Code-Behind

```csharp
private void OnCheckboxChanged(object sender, CheckedChangedEventArgs e)
{
    CheckBox checkbox = (CheckBox)sender;
    bool isChecked = e.Value;

    if (isChecked)
    {
        DisplayAlert("Confirmé", "Conditions acceptées", "OK");
        // Activer d'autres contrôles
        btnSubmit.IsEnabled = true;
    }
    else
    {
        btnSubmit.IsEnabled = false;
    }
}
```

`CheckedChanged` est déclenché quand `isChecked` changed et c'est `CheckedChangedEventArgs` qui contient la propriété `Value` de type `bool`.
